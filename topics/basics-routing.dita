<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN"
"http://docs.oasis-open.org/dita/dtd/topic.dtd">
<topic id="basics-routing">
  <title>Using Routing</title>
  <body>
<p>Agavi Routing is trivially easy to use
    but allows almost any kind of URL maps. As everything else in Agavi, it's
    flexible and extensible. We will examine some of its more arcane features
    in future chapters. For now, we only want to define the default
    actions.</p><p>Routing uses its own XML language which has some serious
    features that become indispensable in real life work. At this stage, we
    will only need two simple routing statements:<codeblock>&lt;route pattern="^/$" module="Public" action="Index"/&gt;
&lt;route pattern="^/blog/(post_id:\d+)$" module="Public" action="ShowPost" name="ShowPost"/&gt;</codeblock></p><p>The
    first route matches the root URL and assigns it to the Index Action. The
    second rule is a little bit more interesting: it declares a parameter
    "post_id" and matches the URL by a regular expression. The part of the URL
    in the matching parens become the value of the named parameter and get
    passed down into the Action. Additionally, the second rule has a "name"
    attribute which is what we use to refer to this rule when we generate
    URLs. </p><p>The routing mechanism works very hard to create a consistent
    URL namespace. Basically, the Routing map works both ways: any URLs that
    can be parsed by the map can also be generated by the map. Routing also
    allows various nifty things such as stop vs non-stop rules, cutting rules,
    nested rules, implied rules, parameter defaults, matching based on
    parameters other than the URL itself (think local time or HTTP headers)
    and plugins. Some of this will soon come handy.</p><p>Phew! Everything is
    ready. Now we can give it a try.</p>
  </body>
</topic>
