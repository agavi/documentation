<?xml version="1.0" encoding="UTF-8"?>
<configurations xmlns="http://agavi.org/agavi/1.0/config">
  <configuration>
    <!-- This validator set is for comment submission only -->
    <validators method="write">
      <validator class="number">
	<argument>post_id</argument>
	<error>Invalid post ID</error>
      </validator>

      <!-- email field is limited to 255 characters -->
      <validator class="string" name="email_length">
	<argument>email</argument>
	<parameter name="min">3</parameter>
	<parameter name="max">255</parameter>
	<errors>
	  <error for="min">The supplied email address is too short</error>
	  <error for="max">The supplied email address is too long</error>
	</errors>
	<!-- If the argument isn't supplied, fail the validnnation
	     without executing the validator at all --> 
	<parameter name="required">false</parameter>
      </validator>

      <!-- accept only valid email addresses -->
      <validator class="email" name="email_validity">
	<argument>email</argument>
	<error>This doesn't look like a valid email address</error>
      </validator>

      <!-- Author name is limited to 255 characters -->
      <validator class="string" name="author_name_length">
	<argument>author_name</argument>
	<parameter name="min">5</parameter>
	<parameter name="max">255</parameter>
	<parameter name="required">false</parameter>
	<errors>
	  <error for="min">Author name is too short</error>
	  <error for="max">Author name is too long</error>
	</errors>
      </validator>

      <!-- Author name must consist of alphanumeric characters,
           whitespace and dashes only -->
      <validator class="regex" name="author_name_validity">
	<argument>author_name</argument>
	<!-- The ``U'' option is to allow UTF-8 -->
	<parameter name="pattern">#^[\w\s\d -]+$#U</parameter>
	<parameter name="match">true</parameter>
	<error>Author name can contain alphanumeric characters, dashes and whitespace only</error>
      </validator>

      <!-- the content body is limited to 2000 characters -->
      <validator class="string" name="body_length">
	<argument>body</argument>
	<parameter name="min">1</parameter>
	<parameter name="max">2000</parameter>
	<errors>
	  <error for="min">The comment can not be empty</error>
	  <error for="max">The comment can not be longer than 2000 characters  </error>
	</errors>
	<parameter name="required">false</parameter>
      </validator>

      <!-- the content body must be encoded with htmlentities(), 
      we use a custom validator class for that -->
      <validator class="BloggieHtmlSanitizationValidator" name="body_sanitizer" required="false">
	<argument>body</argument>
	<!-- overwrite the original argument with the modified one -->
	<export>body</export>
      </validator>
    </validators>
  </configuration>
</configurations>
